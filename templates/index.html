{% import 'macros.html' as macro %}
{% extends "base.html" %}
{% block content %}
<div class="row">
    <div class="carousel carousel-slider" id="features" style="position: relative">
        <div class="controls valign-wrapper" style="position: absolute; top: 0; width: 100%; height: 100%;">
            <div style="width: 100%; padding: 3%;">
                <a class="btn-floating btn-large waves-effect waves-light left" style="z-index: 100;" id="carousel-left"><i class="material-icons">chevron_left</i></a>
                <a class="btn-floating btn-large waves-effect waves-light right" style="z-index: 100;" id="carousel-right"><i class="material-icons">chevron_right</i></a>
            </div>
        </div>
        {% for recipe in featured_recipes %}
        <div class="carousel-item">
            <div style="position: relative;">
                <a href="{{ url_for('recipe', urn=recipe['urn']) }}">
                    <img src="{{ recipe['image'] }}" alt="{{ recipe['title'] }}" class="responsive-img" style="width: 100%;">
                    <div style="position: absolute; top: 0px; left: 0px;">
                        <h2>{{ recipe['title'] }}</h2>
                        <h3>By {{ recipe['username'] }}</h3>
                    </div>
                </a>
            </div> 
        </div>
        {% endfor %}
    </div>
</div>
<div class="row">
    <div class="col s12">
      <ul class="tabs" id="tabs">
        <li class="tab col s3"><a class="active" href="#test1">Recent Recipes</a></li>
        <li class="tab col s3"><a href="#test2">Popular Recipes</a></li>
        <li class="tab col s3"><a href="#test3">About Fork.it</a></li>
      </ul>
    </div>
    <div id="test1" class="col s12">
        {{ macro.recipe_list(recipes) }}
        {{ macro.pagination('recipes', page, no_recipes, **current_query)}}
    </div>
    <div id="test2" class="col s12">Test 2</div>
    <div id="test3" class="col s12">Test 3</div>
</div>
{% endblock %}
{% block javascript %}
<script>
    const $ = cash;
    $(function() {
        M.Tabs.init($('#tabs'));
        let features = M.Carousel.init($('#features')[0], {fullWidth: true, dist: 0, indicators: true, dist: 0});
        $('#carousel-left').on('click', function() {
            features.prev();
        });
        $('#carousel-right').on('click', function() {
            features.next();
        });
    });
</script>
{% endblock %}